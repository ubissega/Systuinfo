<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Teste de uso de css</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <!-- Use a versão 8 do Firebase SDK para evitar problemas com módulos ESM 
    <script defer src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
-->

 

	<style type="text/css">
		body{
			background: url('https://i.imgur.com/ANgNh5H.png') no-repeat fixed;
			background-size: cover;
		}
		.bg-login{    
		    background: url('https://i.imgur.com/ANgNh5H.png') no-repeat fixed;
		    background-size: cover;
		}
		.bg-main{    
		    background: url('https://i.imgur.com/sqq5Rb6.png') no-repeat fixed;
		    background-size: cover;
		}
		.nav-body {
		    font-family: Arial, sans-serif;
		    margin: 0;
		    padding: 0;
		    display: flex;
		    align-items: self-end;
		    height: 15vh;
		    color: #55e7ff;
		}
		.t-s{
			text-shadow: 0 0 50px #55e7ff;
		}
		.bg-t-h1{
			background: #55e7ff50;
			border: solid 2px #55e7ff;
		}
		.b-b{
		    justify-content: space-between;
			border-bottom: solid 2px #55e7ff;
		}
		.login-body {
		    font-family: Arial, sans-serif;
		    margin: 0;
		    padding: 0;
		    display: flex;
		    justify-content: center;
		    align-items: center;
		    height: 80vh;
		}

		.login-container {
		    background-color: #29304050;
		    padding: 20px;
		    border-radius: 8px;
		    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		    width: 300px;
		    max-width: 80%;
		    color: #fff;
		}
		.insc-container {
		    background-color: #29304050;
		    padding: 20px;
		    border-radius: 8px;
		    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		   
		    color: #fff;
		}

		.login-container h2 {
		    text-align: center;
		}

		.login-form {
		    margin-top: 20px;
		}

		.form-group {
		    margin-bottom: 15px;
		}

		.form-group label {
		    display: block;
		    margin-bottom: 5px;
		}

		.form-group input {
		    width: 100%;
		    padding: 8px;
		    margin: 3px;
		    box-sizing: border-box;
		    border: 1px solid #ccc;
		    border-radius: 4px;
		}

		.form-group button {
		    background-color: #55e7ff;
		    color: #293040;
		    padding: 10px;
		    border: none;
		    border-radius: 4px;
		    cursor: pointer;
		    width: 100%;
		}
		.form-group span{
			margin-left: 8px;
		}


		@media (max-width: 600px) {
		    .login-container {
		        width: 90%;
		    }
		    body{
		    	background: green !important;
		    }

		}

    </style>
</head>
<body class="bg-main container">
	<nav class=" nav-body">
		<div class="d-flex justify-content-between b-b w-100">
			<h1 class="bg-t-h1 text-uppercase t-s">systuinfo</h1>
		   	<div class="dropdown">
		   		<button class="btn btn-secondary" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">Insrição do estudante</button>
				<ul class="dropdown-menu dropdown-menu-dark w-100" aria-labelledby="dropdownMenuButton2">
				<li><a class="dropdown-item" href="index.html">Pagina inicial</a></li>
				<li><a class="dropdown-item active" href="index.html">Iniciar sessao</a></li>
				<li><hr class="dropdown-divider"></li>
				<li><a class="dropdown-item" href="#">Manual de uso</a></li>
				</ul>
			</div>


		</div>
	</nav>
	<div class="login-body">					
		<div class="insc-container col-12 col-md-12 col-sm-12 col-xl-9 col-xxl-6 ">		
			<div class="form-group">
				<form action="#" class="row needs-validation " novalidate>
					<div espacamento="primeiro_nome" class="col-md-12">						
			    		<input type="text" name="primeiro_nome" class="form-control" maxLength="15" placeholder="Nome" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
					</div>
					<div espacamento="nome_meio" class="col-md-12" style="display: none;">						
			    		<input type="text" name="nome_meio" class="form-control" maxLength="15" placeholder="Nome do meio" required>
			    		<span class="invalid-feedback">Nao obrigatorio</span>
					</div>
					<div espacamento="ultimo_nome" class="col-md-12" style="display: none;">						
			    		<input type="text" name="ultimo_nome" class="form-control" maxLength="15" placeholder="Ultimo nome" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
					</div>
					<div espacamento="sexo" class="col-md-12" style="display:none;">						
			    		<input type="text" name="sexo" class="form-control" readonly>
					</div>
					<div espacamento="telefone" class="col-md-12" style="display: none;">						
			    		<input type="number" name="telefone" class="form-control" maxLength="9" placeholder="Telefone" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="cidade" class="col-md-12" style="display: none;">						
			    		<input type="text" name="cidade" class="form-control" maxLength="15" placeholder="Cidade" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="morada" class="col-md-12" style="display: none;">						
			    		<input type="text" name="morada" class="form-control" maxLength="15" placeholder="Morada (bairro)" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="id_pic_perfil" class="col-md-12" style="display: none;">						
			    		<input type="file" name="id_pic_perfil" class="form-control">
			    		<span class="valid-feedback">Nao obrigatorio</span>
			    	</div>
					<div espacamento="nivel" class="col-md-12" style="display:none;">
						<select class="form-select" name="nivel" required>
							<option value="">Selecione nivel</option>
							<option >iniciante</option>
							<option >pos iniciante</option>
							<option >finalista</option>
							<option >experiente</option>
						</select>						
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div class="col-md-12">
		        		<img id="imagem-preview" src="" alt="Imagem de Perfil" style="max-width: 50%; display: none; margin-left: 25%;margin-right: 25%;">
		        	</div>
					<div espacamento="email" class="col-md-12" style="display: none;">						
			    		<input type="email" name="email" class="form-control" placeholder="Email" required>
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="senha" class="col-md-12" style="display: none;">						
			    		<input type="password" name="senha" class="form-control" maxLength="6" placeholder="Senha" required >
			    		<span id="spansenha" class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="pergunta_recuperacao" class="col-md-12" style="display: none;">						
						<select class="form-select" name="pergunta_recuperacao" required>
		            		<option active value="">Mencione a pergunta</option>
		            		<option>Qual ee o primerio nome do seu professor/a da primeira classe?</option>
		            		<option>Qual musica tocas quando ee o dia do natal?</option>
		            		<option>Qual ee o apelido do seu presidente favorito?</option>
						</select>
			    		<span class="invalid-feedback">Obrigatorio</span>
			    	</div>
					<div espacamento="resposta_recuperacao" class="col-md-12" style="display: none;">						
			    		<input type="text" name="resposta_recuperacao" class="form-control" maxLength="30" placeholder="Resposta da pergunta" required >
			    		<span id="span_resposta_recuperacao" class="invalid-feedback">Obrigatorio</span>
			    	</div>

					<div espacamento="submit" class="col-md-12" style="display: none;">						
			    		<button id="submit" type="submit" >Submeter</button>
			    	</div>
		    	</form>
			</div>
		</div>
	</div>
  	<footer class="footer text-uppercase">
  		Todos os direitos reservados copyriht systuinfo . 2024
  	</footer>

	<script type="module">

		//====================================
		//INICIALIZANDO A CONEXAO COM FIREBASE
		//====================================

		//Importacao do que precisamos trabalhar
		//--------------------------------------
		import {initializeApp} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
		import {getDatabase,get,ref,set,child} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";
		import {getAuth, createUserWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js";
		import {getStorage,getDownloadURL, ref as storageRef, uploadBytes } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-storage.js";

	    const firebaseConfig = {
	          apiKey: "AIzaSyDohCeHRGxRiO4sfN9pOFHVUqe01cuzUEg",
	          authDomain: "systuinfo.firebaseapp.com",
	          databaseURL: "https://systuinfo-default-rtdb.firebaseio.com",
	          projectId: "systuinfo",
	          storageBucket: "systuinfo.appspot.com",
	          messagingSenderId: "604412345972",
	          appId: "1:604412345972:web:96338d9c4f5853d1765b21"
	     };
	     
	     // Inicialize o Firebase
	    var app=initializeApp(firebaseConfig);
		var db=getDatabase(app);
		var storage = getStorage(app);
		var auth = getAuth(app);


		//=============================
		//GERADOR E VERIFICA:|AO DO ID
		//=============================
	    var id_user_gerado = Math.floor(Math.random(1111111111) * 9999999999);
	    var id_img_gerado = Math.floor(Math.random(111111111111111) * 999999999999999);
	    var estadouser=isExistUserById(id_user_gerado);
	    var estadoimg=isExistImgById(id_img_gerado);
	    var i=0;
	    
		while(estadouser==1){
			estadouser=isExistUserById(id_user_gerado);
			i++;
			if(i==10000){
				break;
			}
		}

		while(estadoimg==1){
			estadoimg=isExistImgById(id_img_gerado);
			i++;
			if(i==10000){
				break;
			}
		}

		
	    //verificarExistenciaID(numeroAleatorio);

		//=============================
		//GLOBARIAR VARIAVEIS
		//=============================	
		var primeiro_nome="";
		var nome_meio="";
		var ultimo_nome="";
		var sexo='';
		var telefone="";
		var morada="";
		var cidade="";
		var inputImagem = document.querySelector('input[name="id_pic_perfil"]');
		var imagemPreview = document.getElementById('imagem-preview');	
		var arquivoImagem="";
		var nivel="";
		var email="";
		var senha="";
		var pergunta_recuperacao="";
		var resposta_recuperacao="";		


		//========================================
		//IA de NOME
		//=======================================

		// Lista de nomes masculinos
		var nomesMasculinos = [
		"João", "Pedro", "Lucas", "Miguel", "Arthur",
		"Gabriel", "Enzo", "Matheus", "Heitor", "Davi"
		];



		var paragrafo = document.getElementById('nomesFemininos');
		if (paragrafo) {	
			 const nomesFemininos = paragrafo.textContent.trim().split(',');
			// Faça algo com o parágrafo encontrado
			console.log(nomesFemininos);	

		}


















		// Lista de nomes femininos
		var nomef=["Ana", "Joana", "Sofia", "Beatriz", "Laura", "Camila", "Isabella", "Gabriela", "Manuela", "Juliana", "Carolina", "Mariana", "Eduarda", "Valentina", "Letícia", "Natália", "Fernanda", "Vitória", "Amanda", "Fatima", "Aisha", "Salomé", "Adélia", "Mónica", "Anabela", "Gracinda", "Clarisse", "Ivone", "Edite", "Alice", "Luísa", "Elvira", "Ilda", "Celeste", "Zulmira", "Isabel", "Hortênsia", "Ester", "Jacinta", "Maria", "Ana", "Sofia", "Beatriz", "Joana", "Laura", "Inês", "Carolina", "Matilde", "Mariana", "Diana", "Filipa", "Leonor", "Rita", "Sara", "Catarina", "Margarida", "Mafalda", "Isabel", "Francisca", "Madalena", "Luísa", "Andreia", "Bruna", "Patrícia", "Débora", "Vanessa", "Cláudia", "Tânia", "Eduarda", "Helena", "Daniela", "Débora", "Telma", "Lídia", "Ana Rita", "Bárbara", "Soraia", "Vera", "Juliana", "Adriana", "Nicole", "Andreia", "Mónica", "Eliana", "Carla", "Marisa", "Ângela", "Joaquina", "Fernanda", "Célia", "Solange", "Vânia", "Fátima", "Patrícia", "Vanessa", "Cristiana", "Raquel", "Susana", "Sónia", "Lorena", "Carolina", "Yara", "Camila", "Lara", "Ema", "Rosana", "Dalila", "Bia", "Alice", "Clara", "Ester", "Flor", "Letícia", "Milena", "Lúcia", "Ivone", "Júlia", "Odete", "Tereza", "Nádia", "Paula", "Silvia", "Tânia", "Vitória", "Yara", "Zara", "Miriam", "Noélia", "Odete", "Rosário", "Sandra", "Teresa", "Ulrika", "Vera", "Ximena", "Yolanda", "Zélia", "Zilda", "Zuleica", "Adrielle", "Alana", "Alice", "Alícia", "Alina", "Alissa", "Althea", "Amália", "Amara", "Amélia", "Amora", "Anabela", "Anamar", "Ananda", "Andreza", "Antonella", "Arabela", "Ariadna", "Ariana", "Ayla", "Belinda", "Bianca", "Branca", "Brisa", "Calista", "Camile", "Cassandra", "Cecília", "Celina", "Clarice", "Cloé", "Dália", "Dandara", "Dani", "Dara", "Dayane", "Dora", "Dulce", "Érica", "Elisa", "Elvira", "Elza", "Ema", "Emanuela", "Erika", "Estela", "Esther", "Eva", "Fabiana", "Fábia", "Fernanda", "Flávia", "Francisca", "Gabriela", "Gaela", "Geórgia", "Giovanna", "Gisela", "Glória", "Graça", "Greta", "Helena", "Heloísa", "Hera", "Irene", "Irina", "Isa", "Isadora", "Iva", "Ivone", "Izabela", "Janaína", "Jéssica", "Júlia", "Juliana", "Jussara", "Kátia", "Kélia", "Laís", "Lara", "Larissa", "Lavinia", "Leandra", "Leticia", "Lia", "Liliana", "Lívia", "Lorena", "Lorraine", "Luana", "Luciana", "Ludmila", "Lurdes", "Luzia", "Madalena", "Magda", "Malu", "Manoela", "Marcele", "Marilene", "User", "continua", "ChatGPT", "Claro", "Maristela", "Marlene", "Marli", "Marta", "Márcia", "Mayara", "Melissa", "Micaela", "Milena", "Miriam", "Mirela", "Muriel", "Nara", "Natacha", "Natália", "Nayara", "Neide", "Neusa", "Nicole", "Noemi", "Norma", "Odete", "Olga", "Olívia", "Paola", "Patrícia", "Paula", "Paulina", "Poliana", "Priscila", "Rafaela", "Raquel", "Rayane", "Rebeca", "Regina", "Renata", "Rita", "Roberta", "Rúbia", "Sabrina", "Samara", "Samantha", "Sandra", "Sara", "Sibele", "Sílvia", "Simone", "Sofia", "Solange", "Stella", "Suzana", "Talita", "Tamara", "Tânia", "Tarsila", "Tereza", "Thais", "Thereza", "Túlia", "Úrsula", "Valéria", "Vanessa", "Verônica", "Vânia", "Vitória", "Viviane", "Walquiria", "Wanessa", "Yara", "Yasmin", "Yolanda", "Yonara", "Zaira", "Zara", "Zélia", "Zenaide", "Zilda", "Zuleica", "Zuleide", "Zulmira", "Zuma", "Zuri", "Zuleika", "Zuriel", "Zulima", "Zarah", "Zanele", "Zabana", "Zinat", "Zerlina", "Zaraí", "Zaira", "Zélia", "Zita", "Zoraida", "Zulena", "Zinia", "Zelia", "Zane", "Zitkala", "", "User", "continua", "ChatGPT", "", "Zayna", "Zuzana", "Zorica", "Zalika", "Zola", "Zabel", "Zelma", "Zafira", "Zinnia", "Zorina", "Zophia", "Zulema", "Zariya", "Zivanka", "Zephyra", "Zabrina", "Zefira", "Zsuzsa", "Zemfira", "Zuliana", "Zaneta", "Zelinda", "Zulekha", "Zoraida", "Zephyrine", "Zamina", "Zerina", "Zsuzsanna", "Zuzanna", "Zabelina", "Zuwena", "Zelinda", "Zaviera", "Zaynab", "Zephyrine", "Zelena", "Zsófia", "Zoraya", "Zareen", "Zelia", "Zsuzsanna", "Zipporah", "Zlata", "Zana", "Zinovia", "Zorica", "Zelma", "Zsazsa", "Zofia", "Zivanka", "Zabrina", "Zafira", "Zephyra", "Zulaika", "Zulma", "Zosia", "Zena", "Zula", "Zetta", "Zafira", "Zoraida", "Zabana", "Zeline", "Zola", "Zephyrine", "Zarah", "Zuleika", "Zada", "Zephyra", "Zuzela", "Zelma", "Zelenia", "Zasha", "Zarah", "Zoraya", "Zahirah", "Zephyrine", "Zoriana", "Zenda", "Zosima", "Zuma", "Zaida", "Zelinda", "Zuleika", "Zabel", "Zaira", "Zsuzsanna", "Ziv", "Zana", "Zella", "Zora", "Zoya", "Zafira", "Zuleika", "Zenaide", "Zinia", "Zelpha", "Zelphia", "Zoraida", "Zariya", "", "", "User", "contua", "ChatGPT", "", "Zula", "Zelena", "Zabel", "Zuzanna", "Zena", "Zola", "Zephyrine", "Zara", "Zuzana", "Zulaika", "Zandra", "Zephyra", "Zadie", "Zenaide", "Zephyrine", "Zuzanna", "Zelpha", "Zelia", "Zosia", "Zuzela", "Zephyra", "Zabina", "Zoraida", "Zulaika", "Zanna", "Zabrina", "Zelma", "Zulaika", "Zephyra", "Zara", "Zelinda", "Zorica", "Zephyrine", "Zaida", "Zuleika", "Zara", "Zelena", "Zsuzsanna", "Zephyrine", "Zora", "Zephyra", "Zulma", "Zena", "Zora", "Zephyrine", "Zuzana", "Zenaide", "Zelma", "Zulma", "Zephyra", "Zoraida", "Zelma", "Zuzanna", "Zuleika", "Zosia", "Zephyra", "Zulaika", "Zana", "Zephyrine", "Zora", "Zelpha", "Zulema", "Zelena", "Zephyra", "Zara", "Zelma", "Zelma", "Zosia", "Zephyrine", "Zara", "Zelena", "Zephyra", "Zelma", "Zuzanna", "Zenaide", "Zephyrine", "Zephyra", "Zephyrine", "Zaida", "Zuzana", "Zephyra", "Zephyra", "Zuleika", "Zephyra", "Zephyrine", "Zephyra", "Zelma", "Zelma", "Zephyra", "Zuleika", "Zosia", "Zephyra", "Zuzana", "Zara", "Zephyra", "Zephyra", "Zephyrine", "Zara", "Zuleika", "Zephyra"];

		// Função para verificar o gênero de um nome
		function verificarGeneroDoNome(nome_verificar) {
			let sexo = "-";
			let nome = "";

			// Verifica se o nome está na lista de nomes femininos
			nomef.forEach(function(nome_lista) {
				if (nome_verificar.toLowerCase() === removerAcento(nome_lista.toLowerCase()).toLowerCase()) {
					sexo = "F";
					nome = nome_lista;
				}else{
					console.log(sexo);
					// Se o gênero ainda for desconhecido, verifica se o nome está na lista de nomes masculinos
					if (sexo === "-") {
						nomesMasculinos.forEach(function(nome_lista) {
							if (nome_verificar.toLowerCase() === removerAcento(nome_lista.toLowerCase()).toLowerCase()) {
								sexo = "M";
								nome = nome_lista;
							}
						});
					}
				}
			});
			
		    // Se não encontrou o nome em nenhuma lista, retorna como desconhecido
		    return { sexo: sexo, nome: nome};
		}

		function removerAcento(palavra) {
		// Objeto com as letras acentuadas e suas correspondentes sem acento
		const letrasSemAcento = {
		'á': 'a', 'à': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'é': 'e', 'è': 'e', 'ê': 'e', 'ë': 'e',
		'í': 'i', 'ì': 'i', 'î': 'i', 'ï': 'i', 'ó': 'o', 'ò': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o',
		'ú': 'u', 'ù': 'u', 'û': 'u', 'ü': 'u', 'ç': 'c'
		};

		// Substitui cada letra acentuada pela sua correspondente sem acento
		let palavraSemAcento = "";
		for (let i = 0; i < palavra.length; i++) {
		const letra = palavra.charAt(i);
		if (letrasSemAcento.hasOwnProperty(letra)) {
		palavraSemAcento += letrasSemAcento[letra]; // Se a letra for acentuada, substitui pela correspondente sem acento
		} else {
		palavraSemAcento += letra; // Se não for acentuada, mantém a letra original
		}
		}

		return palavraSemAcento;
		}




		inputImagem.onchange = function() {
			arquivoImagem = inputImagem.files[0];

	        // Atualize a imagem de preview com a URL do arquivo selecionado
	        const urlImagem = URL.createObjectURL(arquivoImagem);
	        imagemPreview.src = urlImagem;

	        // Exiba a imagem de preview
	        imagemPreview.style.display = 'block';
	    };

		function validacao2() {
	    
		    primeiro_nome = document.querySelector('input[name="primeiro_nome"]').value;
		    nome_meio = document.querySelector('input[name="nome_meio"]').value;
		    ultimo_nome = document.querySelector('input[name="ultimo_nome"]').value;  
		    sexo = document.querySelector('input[name="sexo"]').value;
		    telefone = document.querySelector('input[name="telefone"]').value;
		    morada = document.querySelector('input[name="morada"]').value;
		    cidade = document.querySelector('input[name="cidade"]').value;
		    nivel = document.querySelector('select[name="nivel"]').value;
		    email = document.querySelector('input[name="email"]').value;
		    senha = document.querySelector('input[name="senha"]').value;
		    pergunta_recuperacao = document.querySelector('select[name="pergunta_recuperacao"]').value;
		    resposta_recuperacao = document.querySelector('input[name="resposta_recuperacao"]').value;
			if (!(inputImagem.files.length > 0)) {
				alert("Nenhum arquivo de imagem selecionado.\n submeter messageassim");
		    }else{
				insAuth();
		    }			
		}

	

		//===========================================================================================================
		//TRABALHANDO NA REALTIME DATABASE FIREBASE
		//============================================================================================================

		//===================================
		//VERIFICAR SE O ID DO USUARIO EXISTE
		//====================================
		function isExistUserById(idVerificar) {
			const caminhoNoUsuario = `systuinfo/usuario/${idVerificar}`;
			const referenciaNoUsuario = ref(db, caminhoNoUsuario);

			get(referenciaNoUsuario).then((snapshot) => {
			  if (snapshot.exists()) {
			    // O nó com a chave 236725342 existe
			    return 1;
			  } else {
			    // O nó com a chave 236725342 não existe
			    return 0;
			  }
			}).catch((error) => {
			  // Ocorreu um erro ao buscar o nó
			  //console.log("Erro ao verificar a existência do nó:", error);
			  return -1;
			});
		}
		
		function isExistImgById(idVerificar) {
			const caminhoNoUsuario = `systuinfo/imagem/${idVerificar}`;
			const referenciaNoUsuario = ref(db, caminhoNoUsuario);

			return get(referenciaNoUsuario).then((snapshot) => {
				if (snapshot.exists()) {
					// O nó com a chave idVerificar existe
					return 1; // Retorna 1 para indicar que a imagem existe
				} else {
					// O nó com a chave idVerificar não existe
					return 0; // Retorna 0 para indicar que a imagem não existe
				}
			}).catch((error) => {
				// Ocorreu um erro ao buscar o nó
				console.error("Erro ao verificar a existência da imagem:", error);
				return -1; // Retorna -1 para indicar um erro
			});
		}
		
		//==============================
		//INSERÇÃO NA BASE DE DADOS
		//==============================
		function insAuth(){
			createUserWithEmailAndPassword(auth, email, senha).then((userCredential) => {
				const usuario = userCredential.user;
				var uid = usuario.uid;

				// Caminho no Realtime Database onde você deseja armazenar os dados do usuário
				const dbPath = "systuinfo/usuario/" + id_user_gerado;

				// Referência ao nó no Realtime Database
				const dbRef = ref(db, dbPath);

				// Referência ao local no Firebase Storage onde você deseja armazenar a imagem
				const storagePath = "systuinfo/imagem/" + id_img_gerado;
				const imagemRef = storageRef(storage, storagePath);

				// Fazer upload da imagem para o Firebase Storage
				uploadBytes(imagemRef, arquivoImagem).then((snapshot) => {
					// Obter a URL de download da imagem
					return getDownloadURL(imagemRef);
				}).then((downloadURL) => {

					// Inserir os dados do usuário no Realtime Database, incluindo a URL de download da imagem
					const userData = {
						id_user_auth:uid,
						primeiro_nome: primeiro_nome,
						nome_meio: nome_meio,
						ultimo_nome: ultimo_nome,
						sexo: sexo,
						telefone: telefone,
						morada: morada,
						cidade: cidade,
						source_img: downloadURL, // Armazene a URL de download da imagem, não o blob
						nivel: nivel,
						pergunta_recuperacao: pergunta_recuperacao,
						resposta_recuperacao: resposta_recuperacao
					};

					return set(dbRef, userData);
				}).then(() => {
					alert("Sucesso: Dados do usuário inseridos com sucesso!");
				}).catch((error) => {
					console.error("Erro: Não foi possível inserir os dados do usuário.", error);
					alert("Erro: Não foi possível inserir os dados do usuário.");
				});
			}).catch((error) => {
				const erro=error.message;
				if (erro.indexOf("pelo menos 6 caracteres")) {
  					document.querySelector('input[name="senha"]').classList.add('is-invalid');
  					document.getElementById('spansenha').innerHTML="Mais que 5 digitos";
				}

			});
		}



		//===================================
		//ESCUTA DE TODOS OS INPUT
		//====================================
		// Seleciona todos os elementos de entrada na página
		document.querySelectorAll('input').forEach((input) => {
			
			// Adiciona um ouvinte de eventos para o evento 'input'
			input.addEventListener('input', () => {
				let nomeattr=input.getAttribute('name');
				
				var nome_encontrado=verificarGeneroDoNome(input.value).nome;
				let nome_organizado=nome_encontrado.charAt(0).toUpperCase() + nome_encontrado.slice(1);
				//console.log(nomeattr);
				if(nomeattr==="primeiro_nome"){
					if(verificarGeneroDoNome(input.value).sexo==="M"){						
						input.value=nome_organizado;
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
	    				alert(input.classList.contains('is-valid'));
						document.querySelector('div[espacamento="sexo"]').style.display="block";						
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.add('col-md-4');
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.remove('col-md-6');	
	    				document.querySelector('input[name="sexo"]').value="M";


					}else if(verificarGeneroDoNome(input.value).sexo==="F"){						
						input.value=nome_organizado;
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
						document.querySelector('div[espacamento="sexo"]').style.display="block";			
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.add('col-md-4');
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.remove('col-md-6');	
	    				document.querySelector('input[name="sexo"]').value="F";
					}else{						
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
						document.querySelector('div[espacamento="sexo"]').style.display="none";		
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.remove('col-md-4');
	    				document.querySelector('div[espacamento="ultimo_nome"]').classList.add('col-md-6');
					}

	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="nome_meio"]').style.display="block";
  						document.querySelector('div[espacamento="sexo"]').style.display="none";
	    			}
				}else if( nomeattr==="nome_meio" ){	
					if(verificarGeneroDoNome(input.value).sexo==="M"){				
						input.value=nome_organizado;
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}else{							
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
					}

	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="ultimo_nome"]').style.display="block"; 					
	    			}else{
  						document.querySelector('div[espacamento="ultimo_nome"]').style.display="none"; 
	    			}

				}else if( nomeattr==="ultimo_nome" ){	
					if(verificarGeneroDoNome(input.value).sexo==="M"){				
						input.value=nome_organizado;
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}else{							
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
					}

	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="sexo"]').style.display="block";
  						document.querySelector('div[espacamento="sexo"]').classList.add('is-valid');
  						document.querySelector('div[espacamento="telefone"]').style.display="block";
	
  						document.querySelector('div[espacamento="ultimo_nome"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="ultimo_nome"]').classList.add('col-md-9')

  						document.querySelector('div[espacamento="sexo"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="sexo"]').classList.add('col-md-3')

	    			}

				}else if( nomeattr==="telefone" ){	
					if(input.value.length<10){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="cidade"]').style.display="block";

	    			}
				}else if( nomeattr==="cidade" ){	
					if(input.value.length<6){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="morada"]').style.display="block";

	    			}
				}else if( nomeattr==="morada" ){	
					if(input.value.length<6){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="id_pic_perfil"]').style.display="block";
  						document.querySelector('div[espacamento="nivel"]').style.display="block";

  						document.querySelector('div[espacamento="primeiro_nome"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="primeiro_nome"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="nome_meio"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="nome_meio"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="ultimo_nome"]').classList.remove('col-md-9')
  						document.querySelector('div[espacamento="ultimo_nome"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="sexo"]').classList.remove('col-md-3')
  						document.querySelector('div[espacamento="sexo"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="telefone"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="telefone"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="cidade"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="cidade"]').classList.add('col-md-4')	



						  						// Verifica se a largura da janela é menor ou igual a 600 pixels
						
	    			}
				}else if( nomeattr==="email" ){	
					if(!(input.value.includes("@gmail.com") || input.value.includes("@ucm.ac.mz"))){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="senha"]').style.display="block";

  						document.querySelector('div[espacamento="morada"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="morada"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="id_pic_perfil"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="id_pic_perfil"]').classList.add('col-md-4')

  						document.querySelector('div[espacamento="nivel"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="nivel"]').classList.add('col-md-4')	
	    			}
				}else if( nomeattr==="senha" ){	
					if(input.value.length<6){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
					}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="pergunta_recuperacao"]').style.display="block";

  						document.querySelector('div[espacamento="email"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="email"]').classList.add('col-md-6')

  						document.querySelector('div[espacamento="senha"]').classList.remove('col-md-12')
  						document.querySelector('div[espacamento="senha"]').classList.add('col-md-6')
	    			}
				}else if(nomeattr==="resposta_recuperacao"){
					if(input.value.length<=2){
						input.classList.remove('is-valid');
						input.classList.add('is-invalid');

	  					document.getElementById('span_resposta_recuperacao').innerHTML="A resposta deve ter no minimo 3 letras e no maximo 30 letras";  					
	

					}else{	
						input.classList.remove('is-invalid');
						input.classList.add('is-valid');
	  				}
	    			if(input.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="submit"]').style.display="block";
	    			}
				}
			});
		});



		// Seleciona todos os elementos de entrada na página
		document.querySelectorAll('select').forEach((select) => {
			
			// Adiciona um ouvinte de eventos para o evento 'input'
			select.addEventListener('input', () => {
				var nomeattr=select.getAttribute('name');

				if( nomeattr==="nivel" ){	
					if(select.value===""){
						select.classList.remove('is-valid');
						select.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						select.classList.remove('is-invalid');
						select.classList.add('is-valid');
					}
	    			if(select.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="email"]').style.display="block";
	    			}
				}else if( nomeattr==="pergunta_recuperacao" ){	
					if(select.value===""){
						select.classList.remove('is-valid');
						select.classList.add('is-invalid');
	  					document.getElementById('spansenha').innerHTML="A senha deve ser de 6 digitos.";

					}else{
						select.classList.remove('is-invalid');
						select.classList.add('is-valid');
					}
	    			if(select.classList.contains('is-valid')){
  						document.querySelector('div[espacamento="resposta_recuperacao"]').style.display="block";
	    			}
				}

			});
		});

		//==================================================================================================
		//ESCUTA DE TODOS OS SPAN ou invalid-feedback com valid-feedback
		//===================================================================================================
		// Seleciona todos os elementos de entrada na página



		// Função para criar um usuário com e-mail e senha e associar dados adicionais



		// Example starter JavaScript for disabling form submissions if there are invalid fields
		(function () {
		  'use strict'

		  // Fetch all the forms we want to apply custom Bootstrap validation styles to
		  var forms = document.querySelectorAll('.needs-validation')

		  // Loop over them and prevent submission
		  Array.prototype.slice.call(forms)
		    .forEach(function (form) {
		      form.addEventListener('submit', function (event) {
		        event.preventDefault()
		        if (!form.checkValidity()) {
		          event.stopPropagation()
		        }else{
		        	validacao2();
		        }

		        form.classList.add('was-validated')
		      }, false)
		    })
		})()

		
	</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>
